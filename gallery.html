<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spirited Away Art Shop - Gallery</title>
    <link rel="stylesheet" href="https://use.typekit.net/lqm8rej.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .cart-confirmation {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            animation: slide-in 0.3s ease-out;
        }

        .cart-confirmation-content {
            background: var(--accent-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .cart-confirmation.fade-out {
            animation: fade-out 0.3s ease-in forwards;
        }

        @keyframes slide-in {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fade-out {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1>Spirited Art</h1>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="gallery.html" class="active">Gallery</a>
                <a href="cart.html" style="position: relative;">
                    Cart
                    <span class="cart-count">0</span>
                </a>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="image-mosaic">
                <div
                  class="card card-tall card-wide"
                  style="background-image: url('https://picsum.photos/id/564/1200/800')"
                  data-id="1"
                  data-title="Bathhouse at Twilight"
                  data-price="450">
                    <div class="card-overlay">
                        <div class="card-title">Bathhouse at Twilight</div>
                        <div class="card-price">$450</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card card-tall"
                  style="background-image: url('https://picsum.photos/id/566/800/530')"
                  data-id="2"
                  data-title="Spirit Lanterns"
                  data-price="280">
                    <div class="card-overlay">
                        <div class="card-title">Spirit Lanterns</div>
                        <div class="card-price">$280</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/575/800/530')"
                  data-id="3"
                  data-title="No-Face's Garden"
                  data-price="320">
                    <div class="card-overlay">
                        <div class="card-title">No-Face's Garden</div>
                        <div class="card-price">$320</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/626/800/530')"
                  data-id="4"
                  data-title="Train to Swamp Bottom"
                  data-price="290">
                    <div class="card-overlay">
                        <div class="card-title">Train to Swamp Bottom</div>
                        <div class="card-price">$290</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/667/800/530')"
                  data-id="5"
                  data-title="Dragon's Flight"
                  data-price="380">
                    <div class="card-overlay">
                        <div class="card-title">Dragon's Flight</div>
                        <div class="card-price">$380</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card card-wide"
                  style="background-image: url('https://picsum.photos/id/695/800/530')"
                  data-id="7"
                  data-title="Yubaba's Office"
                  data-price="420">
                    <div class="card-overlay">
                        <div class="card-title">Yubaba's Office</div>
                        <div class="card-price">$420</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/683/800/530')"
                  data-id="8"
                  data-title="Radish Spirit"
                  data-price="270">
                    <div class="card-overlay">
                        <div class="card-title">Radish Spirit</div>
                        <div class="card-price">$270</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/693/800/530')"
                  data-id="9"
                  data-title="River Spirit"
                  data-price="340">
                    <div class="card-overlay">
                        <div class="card-title">River Spirit</div>
                        <div class="card-price">$340</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/715/800/530')"
                  data-id="10"
                  data-title="Zeniba's Cottage"
                  data-price="310">
                    <div class="card-overlay">
                        <div class="card-title">Zeniba's Cottage</div>
                        <div class="card-price">$310</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/610/800/530')"
                  data-id="11"
                  data-title="Paper Birds"
                  data-price="260">
                    <div class="card-overlay">
                        <div class="card-title">Paper Birds</div>
                        <div class="card-price">$260</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
                <div
                  class="card"
                  style="background-image: url('https://picsum.photos/id/599/800/530')"
                  data-id="12"
                  data-title="Moonlit Bridge"
                  data-price="300">
                    <div class="card-overlay">
                        <div class="card-title">Moonlit Bridge</div>
                        <div class="card-price">$300</div>
                        <div class="card-hint">Click for details</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="#" aria-label="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="#" aria-label="Facebook">
                    <i class="fab fa-facebook"></i>
                </a>
            </div>
        </div>
    </footer>
    <!-- Artwork Modal -->
    <div id="artwork-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" aria-label="Close modal">Ã—</button>
            <div class="modal-image">
                <img src="" alt="" id="modal-artwork-image">
            </div>
            <div class="modal-details">
                <h2 id="modal-title"></h2>
                <p id="modal-description"></p>
                <div class="modal-price-section">
                    <span class="modal-price" id="modal-price"></span>
                    <div class="quantity-selector">
                        <button class="quantity-btn minus" aria-label="Decrease quantity">-</button>
                        <input type="number" id="quantity-input" value="1" min="1" max="10">
                        <button class="quantity-btn plus" aria-label="Increase quantity">+</button>
                    </div>
                </div>
                <button class="btn add-to-cart-btn">Add to Cart</button>
            </div>
        </div>
    </div>

    <script type="module">
        import CartSystem from './js/cart.js';

        // Initialize cart indicator
        CartSystem.updateCartIndicator();

        // Artwork descriptions
        const artworkDescriptions = {
            1: "A mesmerizing twilight view of the mystical bathhouse, where steam rises into the purple-tinged sky and lanterns cast a warm glow across the ancient architecture.",
            2: "Delicate spirit lanterns float through a misty evening, their soft light creating an ethereal atmosphere that bridges the gap between the spirit and human worlds.",
            3: "A serene garden scene where No-Face contemplates among blooming flowers and traditional Japanese landscaping elements.",
            4: "A haunting scene of the mysterious train as it glides across the endless sea, carrying spirits to unknown destinations in the fading light.",
            5: "Haku in his majestic dragon form soars through storm clouds, his pearlescent scales gleaming against the turbulent sky.",
            6: "Playful sootsprites dance in the shadows, carrying star-like fragments of light in a mesmerizing display of innocence and magic.",
            7: "The opulent interior of Yubaba's office, filled with magical artifacts, glittering treasures, and the subtle hints of her powerful sorcery.",
            8: "The gentle Radish Spirit stands patiently in the rain, his umbrella creating a peaceful sanctuary in the midst of the bustling bathhouse.",
            9: "The transformed River Spirit emanates pure joy as cleansing rain falls, celebrating its liberation from centuries of human pollution.",
            10: "Zeniba's cozy cottage glows with warmth and wisdom, a sanctuary of peace in the midst of the spirit world's chaos.",
            11: "Delicate paper birds take flight in formation, carrying messages between worlds with grace and determination.",
            12: "The iconic bridge to the bathhouse beneath a full moon, where Chihiro's extraordinary journey began."
        };

        // Modal elements
        const modal = document.getElementById('artwork-modal');
        const modalOverlay = modal.querySelector('.modal-overlay');
        const modalClose = modal.querySelector('.modal-close');
        const modalImage = document.getElementById('modal-artwork-image');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        const modalPrice = document.getElementById('modal-price');
        const quantityInput = document.getElementById('quantity-input');
        const minusBtn = modal.querySelector('.minus');
        const plusBtn = modal.querySelector('.plus');
        const addToCartBtn = modal.querySelector('.add-to-cart-btn');

        // Event listeners for all artwork cards
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', () => {
                const artId = card.dataset.id;
                const artTitle = card.dataset.title;
                const artPrice = card.dataset.price;
                const artImage = card.style.backgroundImage.slice(4, -1).replace(/"/g, "");
                
                // Populate modal content
                modalImage.src = artImage;
                modalImage.alt = artTitle;
                modalTitle.textContent = artTitle;
                modalDescription.textContent = artworkDescriptions[artId];
                modalPrice.textContent = `$${artPrice}`;
                quantityInput.value = "1";
                
                // Show modal with animation
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
        });

        // Close modal functionality
        const closeModal = () => {
            modal.classList.remove('active');
            document.body.style.overflow = '';
        };

        modalClose.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);

        // Quantity selector functionality
        minusBtn.addEventListener('click', () => {
            const currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
            }
        });

        plusBtn.addEventListener('click', () => {
            const currentValue = parseInt(quantityInput.value);
            if (currentValue < 10) {
                quantityInput.value = currentValue + 1;
            }
        });

        // Validate quantity input
        quantityInput.addEventListener('change', () => {
            let value = parseInt(quantityInput.value);
            if (isNaN(value) || value < 1) value = 1;
            if (value > 10) value = 10;
            quantityInput.value = value;
        });

        // Add to cart functionality
        addToCartBtn.addEventListener('click', () => {
            const priceStr = modalPrice.textContent.replace('$', '');
            const artworkDetails = {
                id: document.querySelector('.card[data-title="' + modalTitle.textContent + '"]').dataset.id,
                name: modalTitle.textContent,
                price: parseFloat(priceStr),
                image: modalImage.src,
                quantity: parseInt(quantityInput.value)
            };
            
            CartSystem.addItem(artworkDetails);
            closeModal();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                closeModal();
            }
        });
    </script>

    <svg>
        <defs>
            <filter id="watercolor">
                <feTurbulence result="noise-lg" type="fractalNoise" baseFrequency=".0125" NumOctaves="2" seed="1222" />
                <feTurbulence result="noise-md" type="fractalNoise" baseFrequency=".12" NumOctaves="3" seed="11413" />
                <feComposite result="BaseGraphic" in="SourceGraphic" in2="noise-lg" operator="arithmetic" k1="0.3" k2="0.45" k4="-.07" />
                <feMorphology id="water" result="layer-1" in="BaseGraphic" operator="dilate" radius="0.5" />
                <feDisplacementMap result="layer-1" in="layer-1" in2="noise-lg" xChannelSelector="R" yChannelSelector="B" scale="2" />
                <feDisplacementMap result="layer-1" in="layer-1" in2="noise-md" xChannelSelector="R" yChannelSelector="B" scale="3" />
                <feDisplacementMap result="mask" in="layer-1" in2="noise-lg" xChannelSelector="A" yChannelSelector="A" scale="4" />
                <feGaussianBlur result="mask" in="mask" stdDeviation="6" />
                <feComposite result="layer-1" in="layer-1" in2="mask" operator="arithmetic" k1="1" k2=".25" k3="-.25" k4="0" />
                <feDisplacementMap result="layer-2" in="BaseGraphic" in2="noise-lg" xChannelSelector="G" yChannelSelector="R" scale="2" />
                <feDisplacementMap result="layer-2" in="layer-2" in2="noise-md" xChannelSelector="A" yChannelSelector="G" scale="3" />
                <feDisplacementMap result="glow" in="BaseGraphic" in2="noise-lg" xChannelSelector="R" yChannelSelector="A" scale="5" />
                <feMorphology result="glow-diff" in="glow" operator="erode" radius="2" />
                <feComposite result="glow" in="glow" in2="glow-diff" operator="out" />
                <feGaussianBlur result="glow" in="glow" stdDeviation=".5" />
                <feComposite id="color" result="layer-2" in="layer-2" in2="glow" operator="arithmetic" k1="1.2" k2="0.55" k3=".3" k4="-0.2" />
                <feComposite result="watercolor" in="layer-1" in2="layer-2" operator="over" />
            </filter>

            <filter id="watercolor2">
                <feTurbulence result="noise-lg" type="fractalNoise" baseFrequency=".0125" NumOctaves="2" seed="1222" />
                <feTurbulence result="noise-md" type="fractalNoise" baseFrequency=".12" NumOctaves="3" seed="11413" />
                <feComposite result="BaseGraphic" in="SourceGraphic" in2="noise-lg" operator="arithmetic" k1="0.3" k2="0.35" k4="-.05" />
                <feDisplacementMap result="layer-2" in="BaseGraphic" in2="noise-lg" xChannelSelector="G" yChannelSelector="R" scale="2" />
                <feDisplacementMap result="layer-2" in="layer-2" in2="noise-md" xChannelSelector="A" yChannelSelector="G" scale="3" />
                <feDisplacementMap result="glow" in="BaseGraphic" in2="noise-lg" xChannelSelector="R" yChannelSelector="A" scale="4" />
                <feMorphology result="glow-diff" in="glow" operator="erode" radius="2" />
                <feComposite result="glow" in="glow" in2="glow-diff" operator="out" />
                <feGaussianBlur result="glow" in="glow" stdDeviation="4" />
                <feComposite id="color" result="layer-2" in="layer-2" in2="glow" operator="arithmetic" k1="0.65" k2="1.0" k3="0.4" k4="-0.15" />
            </filter>
        </defs>
    </svg>
</body>
</html>